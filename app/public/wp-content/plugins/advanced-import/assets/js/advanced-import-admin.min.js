!function(t){let e,a,n,o,i=t(document),r=!1,c=!1;const l=function(t){let e,a,n=window.location.search.substring(1).split("&");for(a=0;a<n.length;a++)if((e=n[a].split("="))[0]===t)return void 0===e[1]||decodeURIComponent(e[1])},s=Swal.mixin({position:"bottom-end",showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,toast:!0}),d=function(e){"object"!=typeof e||null===e||e.success?(t("#ai-demo-popup").html(e),s.fire({type:"info",html:t("#ai-demo-popup .ai-notification-title").html()}),s.showLoading()):u(e.data.message)},u=function(t=null,e=null,a=null,n=null){let o=advanced_import_object.text.failedImport.text;o+=t||e||a||n?"<br/>"+advanced_import_object.text.failedImport.code:"",o+=t||"",o+=e||"",o+=a||"",o+=n||"",s.fire({type:"error",html:o}),f()},p=function(e=!1){s.fire({type:"info",html:t(".ai-notification-title").html()}),s.showLoading(),r=!0,m(e)},f=function(){r=!1,_()},m=function(t){return!!t&&(!c&&((c=t).append('<span class="ai-update dashicons dashicons-update"></span>'),c.attr("disabled",!0),void c.closest(".ai-item").addClass("ai-action-importing")))},_=function(){if(!c)return!1;c.children(".ai-update").remove(),c.attr("disabled",!1),c.closest(".ai-item").removeClass("ai-action-importing"),c=!1};function h(){return t.ajax({type:"POST",url:advanced_import_object.ajaxurl,data:{action:"content_screen",_wpnonce:e.val(),_wp_http_referer:a.val(),template_url:o,template_type:n}}).done(function(e){if("object"!=typeof e||null===e||e.success){d(e),(new function(){let e,a=0,i="",r="";function c(a){"object"==typeof a&&void 0!==a.message?(e.find("span").text(a.message),void 0!==a.url?a.hash===r?(e.find("span").text(advanced_import_object.text.failed),l()):(r=a.hash,t.ajax({type:"POST",url:a.url,data:a}).done(c).fail(c)):(a.done,l())):"object"!=typeof a||null===a||a.success?(e.find("span").text(advanced_import_object.text.error),l()):u(a.data.errorMessage?a.data.errorMessage:a.data.message)}function l(){e&&(e.data("done-item")||(a++,e.attr("data-done-item",1)),e.find(".spinner").remove());let r=!1,s=t("tr.ai-available-content");s.each(function(){let a=t(this);""===i||r?(i=a.data("content"),e=a,function(){if(i){let a=e.find("input:checkbox");a.is(":checked")?t.ajax({type:"POST",url:advanced_import_object.ajaxurl,data:{action:"import_content",_wpnonce:advanced_import_object.wpnonce,content:i,template_url:o,template_type:n}}).done(c).fail(c):(e.find("span").text(advanced_import_object.text.skip),setTimeout(l,300))}}(),r=!1):a.data("content")===i&&(r=!0)}),a>=s.length&&complete()}return{init:function(){let e=t(".ai-pages");e.addClass("installing"),e.find("input").prop("disabled",!0),complete=function(){return t.ajax({type:"POST",url:advanced_import_object.ajaxurl,data:{action:"complete_screen",_wpnonce:advanced_import_object.wpnonce}}).done(function(e){return t("#ai-demo-popup").html(e),Swal.fire({title:"Success",html:t("#ai-demo-popup .ai-notification-title").html(),type:"success",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:advanced_import_object.text.successImport.confirmButtonText,cancelButtonText:advanced_import_object.text.successImport.cancelButtonText}).then(e=>{e.value&&window.open(t("#ai-demo-popup .ai-actions-buttons a").attr("href"),"_blank")}),f(),!1}).fail(function(t,e,a){console.log(t+" :: "+e+" :: "+a)}),!1},l()}}}).init()}else u(e.data.errorMessage?e.data.errorMessage:e.data.message)}).fail(function(t,e,a){return u("",t,e,a),!1}),!1}function v(n){return t.ajax({type:"POST",url:advanced_import_object.ajaxurl,data:{action:"plugin_screen",_wpnonce:e.val(),_wp_http_referer:a.val(),recommendedPlugins:n}}).done(function(n){d(n),s.showLoading(),t("#ai-demo-popup .ai-plugins-wrap").find("li").each(function(){return function n(o){if("ai-no-recommended-plugins"===o.attr("id"))return h(),!1;t.ajax({type:"POST",url:advanced_import_object.ajaxurl,data:{action:"install_plugin",_wpnonce:e.val(),_wp_http_referer:a.val(),name:o.data("name"),slug:o.data("slug"),plugin:o.data("slug")+"/"+o.data("main_file"),source:o.data("source")}}).done(function(t){if("object"==typeof t&&void 0!==t.success)if(t.success){if(o.attr("data-completed",1),!o.next("li").length)return h(),!1;setTimeout(n(o.next("li")),1e3)}else{let e="";t.data.errorMessage&&(e=t.data.errorMessage+"<br/>",e+=advanced_import_object.text.failedImport.pluginError+"<br/>",t.data.plugin&&(e+=advanced_import_object.text.failedImport.plugin+t.data.plugin+"<br/>"),t.data.slug&&(e+=advanced_import_object.text.failedImport.slug+t.data.slug+"<br/>")),u(e||t.data.message)}else setTimeout(n(o),1e3)}).fail(function(t,e,a){return u("",t,e,a),!1})}(t(this)),!1})}).fail(function(t,e,a){return u("",t,e,a),!1}),!1}i.ready(function(){i.on("submit","#ai-upload-zip-form",function(n){if(n.preventDefault(),r)return!1;!function(n){if(void 0===window.FormData)return!0;let o=new FormData,i=n.find("#ai-upload-zip-archive"),r=t("#ai-empty-file");if(!i.val())return r.show(),u(r.html()),!1;r.hide(),p();let c=i[0].files[0];e=n.find("input[name=_wpnonce]"),a=n.find("input[name=_wp_http_referer]"),o.append("ai-upload-zip-archive",c),o.append("action","advanced_import_ajax_setup"),o.append("_wpnonce",e.val()),o.append("_wp_http_referer",a.val()),i.val(""),t.ajax({type:"POST",url:advanced_import_object.ajaxurl,data:o,cache:!1,contentType:!1,processData:!1}).done(function(t){return"object"!=typeof t&&(t=JSON.parse(t)),t.success?(h(),!1):(u(t.data.message),!1)}).fail(function(t,e,a){return u("",t,e,a),!1})}(t(this))}),i.on("click",".ai-item .ai-demo-import",function(i){if(i.preventDefault(),r)return!1;let c=t(this),l=t(this).data("plugins"),s="",d=advanced_import_object.text.confirmImport.html;l?(l.forEach(function(t,e){t.name&&(s+=" "+t.name,e<l.length-1&&(s+=","))}),d=d.replace("ai_replace_plugins",s)):d=d.replace("ai_replace_plugins",advanced_import_object.text.confirmImport.no_plugins),Swal.fire({title:advanced_import_object.text.confirmImport.title,html:d,width:"64rem",customClass:{content:"ai-confirm-import-content"},allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:advanced_import_object.text.confirmImport.confirmButtonText,cancelButtonText:advanced_import_object.text.confirmImport.cancelButtonText}).then(i=>{i.value&&(p(c),function(i,r){let c=i.closest(".ai-item");n=c.data("template_type"),o=c.data("template_url"),e=c.find("input[name=_wpnonce]"),a=c.find("input[name=_wp_http_referer]"),"array"===n?v(r):t.ajax({type:"POST",url:advanced_import_object.ajaxurl,data:{action:"demo_download_and_unzip",_wpnonce:e.val(),_wp_http_referer:a.val(),demo_file:o,demo_file_type:n}}).done(function(t){return t.success?(v(r),!1):(u(t.data.errorMessage?t.data.errorMessage:t.data.message,jqXHR,textStatus,errorThrown),!1)}).fail(function(t,e,a){return u("",t,e,a),!1})}(c,l))})}),i.on("click",".ai-wp-reset",function(e){e.preventDefault();let a=t(this);Swal.fire({title:advanced_import_object.text.confirmReset.title,text:advanced_import_object.text.confirmReset.text,type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:advanced_import_object.text.confirmReset.confirmButtonText,cancelButtonText:advanced_import_object.text.confirmReset.cancelButtonText}).then(e=>{e.value&&t.ajax({type:"POST",url:advanced_import_object.ajaxurl,data:{action:"advanced_import_before_reset",_wpnonce:a.siblings("input[name=advanced-import-reset]").val(),_wp_http_referer:a.siblings("input[name=_wp_http_referer]").val()},beforeSend:function(t){s.fire({type:"info",html:advanced_import_object.text.confirmReset.resetting}),s.showLoading()}}).done(function(e){if(!e.success)return u(e.data.message),!1;window.location.href=t(".ai-wp-reset").attr("href")}).fail(function(t,e,a){u("",t,e,a)})})}),i.on("click",".ai-filter-tabs li",function(e){if(e.preventDefault(),r)return!1;t(this).hasClass("ai-form-file-import")?(t(".ai-filter-content").addClass("hidden"),t(".ai-form").removeClass("hidden")):(t(".ai-form").addClass("hidden"),t(".ai-filter-content").removeClass("hidden"))});let c,d,f={};setTimeout(function(){let e=t(".ai-filter-content-wrapper").isotope({itemSelector:".ai-item",filter:function(){let e=t(this),a=!d||e.text().match(d),n=!c||e.is(c);return a&&n}});function a(){let a=e.isotope("getFilteredItemElements"),n=t(a);t(".ai-filter-btn").each(function(e,a){let o=t(a),i=o.attr("data-filter");if(!i)return;let r=n.filter(i).length;o.find(".ai-count").text(r)})}e.imagesLoaded().progress(function(){e.isotope("layout")}),a(),t(".ai-filter-group").on("click",".ai-filter-btn",function(){let n=t(this),o=n.parents(".ai-filter-group").attr("data-filter-group");n.siblings().removeClass("ai-filter-btn-active"),n.addClass("ai-filter-btn-active"),f[o]=n.attr("data-filter"),c=function(t){let e="";for(let a in t)e+=t[a];return e}(f),setTimeout(function(){e.isotope(),(n.hasClass("ai-fp-filter")||n.hasClass("ai-type-filter"))&&a()},300)});let n=t(".ai-search-filter").keyup(function(t,e){let a;return e=e||100,function(){clearTimeout(a);let n=arguments,o=this;a=setTimeout(function(){t.apply(o,n)},e)}}(function(){d=new RegExp(n.val(),"gi"),e.isotope(),a()}))},1),function(){let t=l("reset"),e=l("from");"true"===t&&"ai-reset-wp"===e&&Swal.fire({title:advanced_import_object.text.resetSuccess.title,type:"success",allowOutsideClick:!1,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:advanced_import_object.text.resetSuccess.confirmButtonText})}()}),setTimeout(function(){let t=window.location.href;if(new RegExp("[?|&]reset=[0-9a-zA-Z_+-|.,;]*").test(t)){let t=new URL(location);t.searchParams.delete("reset"),t.searchParams.delete("from"),history.replaceState(null,null,t)}},1500)}(jQuery);
"use strict";(globalThis.webpackChunkgoogle_listings_and_ads=globalThis.webpackChunkgoogle_listings_and_ads||[]).push([[472],{3919:(e,t,n)=>{n.d(t,{NS:()=>u,RO:()=>g,Me:()=>m,Ay:()=>E});var o=n(1609),c=n(7723),a=n(6427),l=n(6087),s=n(9457),i=n(7892),r=n(7792),d=n(8582);const g="all-accounts",u="ads-account",m="api-data-fetch-feature",A={[g]:{title:(0,c.__)("Disconnect all accounts","google-listings-and-ads"),confirmButton:(0,c.__)("Disconnect all accounts","google-listings-and-ads"),confirmation:(0,c.__)("Yes, I want to disconnect all my accounts.","google-listings-and-ads"),contents:[(0,c.__)("I understand that I am disconnecting any WordPress.com account, Google account, Google Merchant Center account and Google Ads account connected to this extension.","google-listings-and-ads"),(0,c.__)("Any active product listings will continue to show on Google. They can be managed, edited, or deleted manually from Google Merchant Center (merchants.google.com).","google-listings-and-ads"),(0,c.__)("Any ongoing paid campaigns will continue to run. They can be managed, edited, or deleted manually from Google Ads (ads.google.com).","google-listings-and-ads")]},[u]:{title:(0,c.__)("Disconnect Google Ads account","google-listings-and-ads"),confirmButton:(0,c.__)("Disconnect Google Ads Account","google-listings-and-ads"),confirmation:(0,c.__)("Yes, I want to disconnect my Google Ads account.","google-listings-and-ads"),contents:[(0,c.__)("I understand that I am disconnecting my Google Ads account from this WooCommerce extension.","google-listings-and-ads"),(0,c.__)("Any ongoing paid campaigns will continue to run. They can be managed, edited, or deleted manually from Google Ads (ads.google.com).","google-listings-and-ads"),(0,c.__)("Some configurations for Google Ads created through WooCommerce may be lost. This cannot be undone.","google-listings-and-ads")]},[m]:{title:(0,c.__)("Disable data fetching","google-listings-and-ads"),confirmButton:(0,c.__)("Disable data fetching","google-listings-and-ads"),confirmation:(0,c.__)("Yes, I want to disable the data fetching feature.","google-listings-and-ads"),contents:[(0,c.__)("I understand that I am disabling the data fetching feature from this WooCommerce extension.","google-listings-and-ads"),(0,c.__)("Any ongoing campaigns and configuration will continue to run. They will be pushed to Google as in the previous versions of this extension.","google-listings-and-ads")]}};function h({disconnectTarget:e,onRequestClose:t,onDisconnected:n,disconnectAction:u}){const[m,h]=(0,l.useState)(!1),[E,_]=(0,l.useState)(!1),f=(0,d.j)(),{title:p,confirmButton:y,confirmation:b,contents:C}=A[e],v=()=>{E||t()};return(0,o.createElement)(s.A,{className:"gla-disconnect-accounts-modal",title:(0,o.createElement)(o.Fragment,null,(0,o.createElement)(r.A,{size:20}),p),isDismissible:!E,buttons:[(0,o.createElement)(i.A,{key:"1",isSecondary:!0,disabled:E,onClick:v},(0,c.__)("Never mind","google-listings-and-ads")),(0,o.createElement)(i.A,{key:"2",isPrimary:!0,isDestructive:!0,loading:E,disabled:!m,onClick:()=>{let o=e===g?f.disconnectAllAccounts:f.disconnectGoogleAdsAccount;u&&(o=u),_(!0),o().then((()=>{n(),t()})).catch((()=>{_(!1)}))}},y)],onRequestClose:v},C.map(((e,t)=>(0,o.createElement)("p",{key:t},e))),(0,o.createElement)(a.CheckboxControl,{label:b,checked:m,disabled:E,onChange:h}))}function E(e){return(0,o.createElement)(h,{...e})}},5654:(e,t,n)=>{n.r(t),n.d(t,{default:()=>re});var o=n(1609),c=n(6087),a=n(6476),l=n(3905),s=n(2721),i=n(8e3),r=n(1016),d=n(3666),g=n(5489),u=n(7723),m=n(6427),A=n(1968),h=n(7401),E=n(7916),_=n(1378),f=n(7892),p=n(6028),y=n(850),b=n(4790),C=n(3476),v=n(7978),G=n(8981),w=n(6575);function k(e){return(0,o.createElement)(w.A,{title:(0,u.__)("Linked accounts","google-listings-and-ads"),description:(0,u.__)("A WordPress.com account, Google account, Google Merchant Center account, and Google Ads account are required to use this extension in WooCommerce.","google-listings-and-ads"),...e})}var N=n(3919),D=n(6473);const{CONNECTED:S,INCOMPLETE:x}=l.Wn;function I(){const e=(0,A.A)(),{jetpack:t}=(0,h.A)(),{google:n}=(0,i.A)(),{googleMCAccount:a}=(0,E.A)(),{googleAdsAccount:l}=(0,_.A)(),s=!(t&&n&&a&&l),r=[S,x].includes(l?.status),[g,I]=(0,c.useState)(null);return(0,o.createElement)(k,null,g&&(0,o.createElement)(N.Ay,{onRequestClose:()=>I(null),onDisconnected:()=>{(0,D.Ff)("gla_disconnected_accounts",{context:g});const t=g===N.RO?e+(0,d.XG)():window.location.href;window.location.href=t},disconnectTarget:g}),s?(0,o.createElement)(p.A,null):(0,o.createElement)(y.A,{size:"large"},(0,o.createElement)(b.LJ,{jetpack:t}),(0,o.createElement)(C.A,{googleAccount:n,hideAccountSwitch:!0}),(0,o.createElement)(v.i,{googleMCAccount:a,hideAccountSwitch:!0}),r&&(0,o.createElement)(G.E,{googleAdsAccount:l,hideAccountSwitch:!0},(0,o.createElement)(w.A.Card.Footer,null,(0,o.createElement)(f.A,{isDestructive:!0,isLink:!0,onClick:()=>I(N.NS)},(0,u.__)("Disconnect Google Ads account only","google-listings-and-ads")))),(0,o.createElement)(m.Flex,{justify:"flex-end"},(0,o.createElement)(f.A,{isPrimary:!0,isDestructive:!0,onClick:()=>I(N.RO)},(0,u.__)("Disconnect from all accounts","google-listings-and-ads")))))}var T=n(7677),q=n(1903),F=n(3741),P=n(2137),L=n(3832),M=n(8468),O=n(5535);let W=null;function j(){if(W)return;const e=(0,L.getQueryArgs)(document.location.search),t=t=>{const{target:n}=t;if("A"!==n.tagName)return;const o=[d.Uq.dashboard,d.Uq.reports,d.Uq.productFeed,d.Uq.settings],c=(0,L.getQueryArgs)(n.getAttribute("href"));if(o.includes(c.path)){t.stopPropagation(),t.preventDefault();const n=!(0,O.A)()||c.path===d.Uq.settings,o=(0,L.getQueryArgs)(document.location.search);if(n&&!(0,M.isEqual)(e,o)){const{path:t,...n}=e;(0,a.getHistory)().push((0,a.getNewPath)(n,t,null))}}};document.defaultView.addEventListener("click",t,!0),document.body.classList.add("gla-reconnection-lock"),W=()=>{document.defaultView.removeEventListener("click",t,!0),document.body.classList.remove("gla-reconnection-lock")}}function R(){W&&(W(),W=null)}function B(){const{jetpack:e}=(0,h.A)(),t="yes"===e?.active;return(0,c.useEffect)((()=>{t?((0,a.getHistory)().replace((0,d.FN)()),R()):j()}),[t]),e?(0,o.createElement)(k,null,(0,o.createElement)(y.A,{size:"large"},(0,o.createElement)(P.A,{className:"gla-wpcom-connection-lost-card",isBorderless:!0,size:"small",icon:(0,o.createElement)(T.A,{icon:q.A,size:24}),title:(0,u.__)("Your WordPress.com account has been disconnected.","google-listings-and-ads"),helper:(0,u.__)("Connect your WordPress.com account to ensure your products stay listed on Google. If you do not re-connect, your products can’t be automatically synced to Google, and any existing listings may be removed from Google.","google-listings-and-ads")}),(0,o.createElement)(b.s9,null))):(0,o.createElement)(F.A,null)}var H=n(7400),K=n(9415),Y=n(8582);function z({email:e}){const t=(0,A.A)(),[n,l]=(0,c.useState)(null),{disconnectGoogleAccount:s}=(0,Y.j)(),[i,r]=(0,c.useState)(!1);return(0,o.createElement)(P.A,{appearance:P.x.GOOGLE,description:e},(0,o.createElement)(m.CardDivider,null),(0,o.createElement)(w.A.Card.Body,null,(0,o.createElement)(m.Notice,{status:"error",isDismissible:!1},(0,o.createElement)("p",null,(0,c.createInterpolateElement)((0,u.__)("This Google account, <accountEmail />, was not the Google account previously connected to this integration.","google-listings-and-ads"),{accountEmail:(0,o.createElement)("strong",null,e)})),(0,o.createElement)("p",null,(0,u.__)("Thus, it doesn‘t have access to the Google Merchant Center and/or Google Ads account currently connected to this WooCommerce store.","google-listings-and-ads")),(0,o.createElement)("p",null,(0,u.__)("Try connecting with a different Google account, or completely disconnect all your connected accounts.","google-listings-and-ads")))),(0,o.createElement)(w.A.Card.Footer,{justify:"flex-end"},n&&(0,o.createElement)(N.Ay,{onRequestClose:()=>l(null),onDisconnected:()=>{const e=(0,a.getNewPath)(null,"/google/start",null);window.location.href=t+e},disconnectTarget:n}),(0,o.createElement)(f.A,{isSecondary:!0,isDestructive:!0,disabled:i,onClick:()=>l(N.RO)},(0,u.__)("Disconnect all accounts","google-listings-and-ads")),(0,o.createElement)(f.A,{isPrimary:!0,loading:i,onClick:()=>{r(!0),s().catch((()=>{r(!1)}))}},(0,u.__)("Try another Google account","google-listings-and-ads"))))}function U(){const{data:e}=(0,K.A)("getGoogleAccountAccess"),t=(0,H.A)(l.Th.adsSetupComplete,e?.scope),n="yes"===e?.active,s=n?"no"===e?.merchant_access||"no"===e?.ads_access:void 0,i=n&&!s&&t.glaRequired;if((0,c.useEffect)((()=>{i?((0,a.getHistory)().replace((0,d.uZ)()),R()):j()}),[i]),!e)return(0,o.createElement)(F.A,null);if(!i){const t=s?(0,o.createElement)(z,{email:e.email}):(0,o.createElement)(C.h,null);return(0,o.createElement)(w.A,{title:(0,u.__)("Connect account","google-listings-and-ads")},t)}return null}var $=n(6474),Q=n(5595),V=n(7539),J=n(7980),X=n(1177),Z=n(5556);const ee=()=>{(0,$.A)("full-content");const{updateGoogleMCContactInformation:e}=(0,Y.j)(),{data:t}=(0,Q.A)(),[n,l]=(0,c.useState)(!1),s=t.isAddressFilled&&t.isMCAddressDifferent;return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(V.A,{title:(0,u.__)("Edit store address","google-listings-and-ads"),helpButton:(0,o.createElement)(J.A,{eventContext:"edit-store-address"}),backHref:(0,d.FN)()}),(0,o.createElement)("div",{className:"gla-settings"},(0,o.createElement)(w.A,{title:(0,u.__)("Store address","google-listings-and-ads"),description:(0,o.createElement)("div",null,(0,o.createElement)("p",null,(0,u.__)("Your store address is required by Google for verification purposes. It will be shared with the Google Merchant Center and will not be displayed to customers.","google-listings-and-ads")),(0,o.createElement)("p",null,(0,o.createElement)(X.A,{context:"settings-store-address",linkId:"contact-information-read-more",href:"https://woocommerce.com/document/google-for-woocommerce/get-started/requirements/#contact-information"},(0,u.__)("Learn more","google-listings-and-ads"))))},(0,o.createElement)(Z.A,{showValidation:!t.isAddressFilled})),(0,o.createElement)(w.A,null,(0,o.createElement)(m.Flex,{justify:"flex-end"},(0,o.createElement)(f.A,{isPrimary:!0,loading:n,disabled:!s,eventName:"gla_contact_information_save_button_click",onClick:()=>{l(!0),e().then((()=>(0,a.getHistory)().push((0,d.FN)()))).catch((()=>l(!1)))}},(0,u.__)("Save details","google-listings-and-ads"))))))};var te=n(5414),ne=n(2783),oe=n(8389);const ce=()=>{const e=(0,te.A)();return(0,oe.A)(e),(0,$.A)("full-content"),(0,o.createElement)(o.Fragment,null,(0,o.createElement)(V.A,{title:(0,u.__)("Edit phone number","google-listings-and-ads"),helpButton:(0,o.createElement)(J.A,{eventContext:"edit-phone-number"}),backHref:(0,d.FN)()}),(0,o.createElement)("div",{className:"gla-settings"},(0,o.createElement)(w.A,{title:(0,u.__)("Phone number","google-listings-and-ads"),description:(0,o.createElement)("div",null,(0,o.createElement)("p",null,(0,u.__)("Your phone number is required by Google for verification purposes. It will be shared with the Google Merchant Center and will not be displayed to customers.","google-listings-and-ads")),(0,o.createElement)("p",null,(0,o.createElement)(X.A,{context:"settings-phone-number",linkId:"contact-information-read-more",href:"https://woocommerce.com/document/google-for-woocommerce/get-started/requirements/#contact-information"},(0,u.__)("Learn more","google-listings-and-ads"))))},(0,o.createElement)(ne.A,{view:"settings",phoneNumber:e,initEditing:!0}))))};var ae=n(332),le=n(5462),se=n(5246);const ie="gla-settings",re=()=>{const{subpath:e}=(0,a.getQuery)();(0,s.A)(),(0,r.A)();const{google:t}=(0,i.A)(),n=e===d.$K.reconnectGoogleAccount;switch((0,c.useEffect)((()=>{n||"no"!==t?.active||(0,a.getHistory)().replace((0,d.Ke)(l.iH.GOOGLE_DISCONNECTED))}),[n,t]),e){case d.$K.reconnectWPComAccount:return(0,o.createElement)("div",{className:ie},(0,o.createElement)(B,null));case d.$K.reconnectGoogleAccount:return(0,o.createElement)(U,null);case d.$K.editPhoneNumber:return(0,o.createElement)(ce,null);case d.$K.editStoreAddress:return(0,o.createElement)(ee,null)}return(0,o.createElement)("div",{className:ie},(0,o.createElement)(ae.A,null),(0,o.createElement)(le.A,null),(0,o.createElement)(se.A,null),(0,o.createElement)(g.h,null),(0,o.createElement)(I,null))}}}]);
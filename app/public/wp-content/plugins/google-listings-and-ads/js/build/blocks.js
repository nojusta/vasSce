(()=>{"use strict";const e=window.wc.productEditor,t=window.React,n=window.wp.i18n,o=window.wc.blockTemplates,s=window.wp.components,l=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-onboarding-prompt","title":"Product onboarding prompt","textdomain":"google-listings-and-ads","attributes":{"startUrl":{"type":"string","__experimentalRole":"content"}},"supports":{"html":false,"inserter":false,"lock":false}}'),a=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-channel-visibility","title":"Product channel visibility","textdomain":"google-listings-and-ads","attributes":{"property":{"type":"string","__experimentalRole":"content"},"options":{"type":"array","items":{"type":"object"},"default":[]},"valueOfSync":{"type":"string"},"valueOfDontSync":{"type":"string"},"statusOfSynced":{"type":"string"},"statusOfHasErrors":{"type":"string"}},"supports":{"html":false,"inserter":false,"lock":false}}'),i=window.wp.date,r=window.wp.element,p=window.wc.wcSettings;async function c(e,t){const n=e.current;if(!n.validity.valid)return(0,p.isWcVersion)("9.2.0","<")?n.validationMessage:{message:n.validationMessage,context:t}}const u=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-date-time-field","title":"Product date and time fields","textdomain":"google-listings-and-ads","attributes":{"label":{"type":"string"},"tooltip":{"type":"string"},"property":{"type":"string","__experimentalRole":"content"}},"supports":{"html":false,"inserter":false,"lock":false}}'),d=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-select-field","title":"Product select field","textdomain":"google-listings-and-ads","attributes":{"label":{"type":"string"},"tooltip":{"type":"string"},"property":{"type":"string","__experimentalRole":"content"},"options":{"type":"array","items":{"type":"object"},"default":[]}},"supports":{"html":false,"inserter":false,"lock":false}}'),g=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"google-listings-and-ads/product-select-with-text-field","title":"Product select with text field","textdomain":"google-listings-and-ads","attributes":{"label":{"type":"string"},"tooltip":{"type":"string"},"property":{"type":"string","__experimentalRole":"content"},"options":{"type":"array","items":{"type":"object"},"default":[]},"customInputValue":{"type":"string"}},"supports":{"html":false,"inserter":false,"lock":false}}');function m({name:t,...n},o){(0,e.registerProductEditorBlockType)({name:t,metadata:n,settings:{edit:o}})}m(l,(function({attributes:e}){const l=(0,o.useWooBlockProps)(e);return(0,t.createElement)("div",{...l},(0,t.createElement)("div",{className:"Dz8NM01hSQyVP7lytEaS"},(0,t.createElement)("p",{className:"iKH0I_4hIpw3xXPSFYR4"},(0,n.__)("Complete setup to get your products listed on Google for free.","google-listings-and-ads")),(0,t.createElement)(s.Button,{isPrimary:!0,href:e.startUrl},(0,n.__)("Get Started","google-listings-and-ads"))))})),m(a,(function({attributes:l,context:a}){const{valueOfSync:i,valueOfDontSync:r,statusOfSynced:p,statusOfHasErrors:c}=l,u=(0,o.useWooBlockProps)(l),[d,g]=(0,e.__experimentalUseProductEntityProp)(l.property,{postType:a.postType}),{is_visible:m,sync_status:y,issues:f}=d,h=m?d.channel_visibility:r;let b=null;y===c?b=(0,n.__)("Issues detected","google-listings-and-ads"):y&&(b=y.replace("-"," "));const _=m?"":(0,n.__)("This product cannot be shown on any channel because it is hidden from your store catalog. To enable this option, please change this product to be shown in the product catalog, and save the changes.","google-listings-and-ads"),x=m&&null!==b&&h===i&&y!==p,E=f.length>0;return(0,t.createElement)("div",{...u},(0,t.createElement)(s.SelectControl,{disabled:!m,options:l.options,value:h,onChange:e=>{g({...d,channel_visibility:e})},help:_}),x&&(0,t.createElement)(s.Notice,{className:"xrM9YQcns2lLIJoZocoC",status:E?"warning":"info",isDismissible:!1},(0,t.createElement)("section",null,(0,t.createElement)("h2",null,(0,n.__)("Google sync status","google-listings-and-ads")),(0,t.createElement)("p",{className:"FNzfRIMkTNDr5hdJSQJS"},b)),E&&(0,t.createElement)("section",null,(0,t.createElement)("h2",null,(0,n.__)("Issues","google-listings-and-ads")),(0,t.createElement)("ul",null,f.map(((e,n)=>(0,t.createElement)("li",{key:n},e)))))))})),m(u,(function({attributes:n,context:l,clientId:a}){const{property:p}=n,u=(0,o.useWooBlockProps)(n),[d,g]=(0,e.__experimentalUseProductEntityProp)(p,{postType:l.postType,fallbackValue:""}),m=(0,r.useRef)(null),y=(0,r.useRef)(null),[f,h]=(0,r.useState)((()=>d?(0,i.date)("Y-m-d",d):"")),[b,_]=(0,r.useState)((()=>d?(0,i.date)("H:i",d):"")),x=(e,t)=>{let n="";if(e){const o=`${e}T${t||"00:00:00"}`,s=(0,i.getDate)(o);n=(0,i.date)("c",s,"UTC")}h(e),_(t),d!==n&&g(n)},E=(0,e.useValidation)(`${p}-date`,(()=>c(m,a))),w=(0,e.useValidation)(`${p}-time`,(()=>c(y,a)));return(0,t.createElement)("div",{...u},(0,t.createElement)(s.Flex,{align:"flex-start"},(0,t.createElement)(s.FlexBlock,null,(0,t.createElement)(e.__experimentalTextControl,{ref:m,type:"date",pattern:"\\d{4}-\\d{2}-\\d{2}",label:n.label,tooltip:n.tooltip,value:f,error:E.error,onChange:e=>x(e,b),onBlur:E.validate})),(0,t.createElement)(s.FlexBlock,null,(0,t.createElement)(e.__experimentalTextControl,{className:"p9THnpoXkzl3X4b4PYpg",label:" ",tooltip:"â€Ž ",ref:y,type:"time",pattern:"[0-9]{2}:[0-9]{2}",value:b,error:w.error,onChange:e=>x(f,e),onBlur:w.validate}))))})),m(d,(function({attributes:n,context:l}){const a=(0,o.useWooBlockProps)(n),[i,r]=(0,e.__experimentalUseProductEntityProp)(n.property,{postType:l.postType});return(0,t.createElement)("div",{...a},(0,t.createElement)(s.SelectControl,{label:(0,t.createElement)(e.__experimentalLabel,{label:n.label,tooltip:n.tooltip}),options:n.options,value:i,onChange:r}))})),m(g,(function({attributes:n,context:l}){const{options:a,customInputValue:i}=n,p=(0,o.useWooBlockProps)(n),[c,u]=(0,e.__experimentalUseProductEntityProp)(n.property,{postType:l.postType,fallbackValue:""}),[d,g]=(0,r.useState)((()=>{var e;const t=null!=c?c:"",n=a.find((e=>e.value===t));return null!==(e=n?.value)&&void 0!==e?e:i})),m=d===i,[y,f]=(0,r.useState)(m?c:"");return(0,t.createElement)("div",{...p},(0,t.createElement)(s.SelectControl,{label:(0,t.createElement)(e.__experimentalLabel,{label:n.label,tooltip:n.tooltip}),options:a,value:d,onChange:e=>{g(e),u(e===i?y:e)}}),m&&(0,t.createElement)(e.__experimentalTextControl,{type:"text",value:y,onChange:e=>{f(e),u(e)}}))}))})();
(()=>{"use strict";const e=window.wc.blocksCheckout,t=window.wc.wcBlocksSharedHocs,i=window.React,n=window.wp.element,o=window.wp.i18n,c=window.wc.wcSettings,{optinDefaultText:r,gdprHeadline:s,gdprFields:a,gdprStatus:l,userSubscribed:d,checkboxSettings:m}=(0,c.getSetting)("mailchimp-newsletter_data",""),p={text:{type:"string",default:r},gdprHeadline:{type:"string",default:s},gdpr:{type:"array",default:a},gdprStatus:{type:"string",default:l},userSubscribed:{type:"bool",default:d},checkboxSettings:{type:"array",default:m}},u=JSON.parse('{"apiVersion":2,"name":"woocommerce/mailchimp-newsletter-subscription","version":"1.0.0","title":"Mailchimp Newsletter!","category":"woocommerce","description":"Adds a newsletter subscription checkbox to the checkout.","supports":{"html":true,"align":false,"multiple":false,"reusable":false},"parent":["woocommerce/checkout-contact-information-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":true}}},"textdomain":"mailchimp-woocommerce","editorStyle":"file:../../../build/style-newsletter-block.css"}');(0,e.registerCheckoutBlock)({metadata:u,component:(0,t.withFilteredAttributes)(p)((({cart:t,extensions:c,text:r,gdprHeadline:s,gdprStatus:a,gdpr:l,userSubscribed:d,checkoutExtensionData:m})=>{let p={};l&&l.length&&l.forEach((e=>{p[e.marketing_permission_id]=!1}));const u="check"===a,[h,w]=(0,n.useState)(u),[g]=(0,n.useState)({}),{setExtensionData:k}=m;return(0,n.useEffect)((()=>{k("mailchimp-newsletter","optin",h)}),[h,k]),(0,i.createElement)("div",{className:"wc-block-components-checkout-step__container"},(0,i.createElement)("div",{style:{display:"hide"===a||d?"none":""},className:"wc-block-components-checkout-step__content"},(0,i.createElement)(e.CheckboxControl,{id:"subscribe-to-newsletter",checked:h,onChange:w},(0,i.createElement)("span",{dangerouslySetInnerHTML:{__html:r}})),l&&l.length?(0,o.__)(s,"mailchimp-for-woocommerce"):"",l&&l.length?l.map((t=>(0,i.createElement)(e.CheckboxControl,{id:"gdpr_"+t.marketing_permission_id,checked:g[t.marketing_permission_id],onChange:e=>{g[t.marketing_permission_id]=!g[t.marketing_permission_id],k("mailchimp-newsletter","gdprFields",g)}},(0,i.createElement)("span",{dangerouslySetInnerHTML:{__html:t.text}})))):""))}))})})();